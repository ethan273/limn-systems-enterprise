{
  "timestamp": "2025-10-03T15:36:35.319Z",
  "totalPrismaModels": 284,
  "totalDatabaseTables": 299,
  "unusedTables": [
    "_documentsToproduction_orders",
    "cash_flow_summary",
    "collections",
    "customer_summary",
    "database_health_final",
    "design_project_overview",
    "designer_dashboard",
    "designer_performance_summary",
    "email_campaign_performance",
    "email_engagement_timeline",
    "integration_health",
    "inventory_status",
    "invoice_line_items",
    "manufacturer_overview",
    "material_combinations",
    "my_permissions",
    "notification_analytics",
    "optimization_final_status",
    "order_profitability",
    "order_statistics",
    "orders_compatible",
    "payment_batch_summary",
    "policy_count_by_table",
    "production_status",
    "projects_compatible",
    "rls_policy_dashboard",
    "security_audit_log",
    "shipping_status",
    "sms_campaign_performance",
    "sms_delivery_timeline",
    "v_active_pwa_devices",
    "v_ready_to_invoice",
    "warnings_fixed"
  ],
  "unusedFields": {},
  "missingIndexes": [
    {
      "table": "customer_portal_activity",
      "column": "portal_id",
      "reason": "Foreign key to customer_portals.id"
    },
    {
      "table": "customer_portal_activity",
      "column": "portal_user_id",
      "reason": "Foreign key to customer_portal_users.id"
    },
    {
      "table": "customer_portal_sessions",
      "column": "portal_user_id",
      "reason": "Foreign key to customer_portal_users.id"
    },
    {
      "table": "document_revisions",
      "column": "changed_by",
      "reason": "Foreign key to user_profiles.id"
    },
    {
      "table": "document_revisions",
      "column": "reviewed_by",
      "reason": "Foreign key to user_profiles.id"
    },
    {
      "table": "documents",
      "column": "approved_by",
      "reason": "Foreign key to user_profiles.id"
    },
    {
      "table": "documents",
      "column": "collection_id",
      "reason": "Foreign key to collections.id"
    },
    {
      "table": "documents",
      "column": "design_project_id",
      "reason": "Foreign key to design_projects.id"
    },
    {
      "table": "documents",
      "column": "manufacturer_project_id",
      "reason": "Foreign key to manufacturer_projects.id"
    },
    {
      "table": "documents",
      "column": "order_item_id",
      "reason": "Foreign key to order_items.id"
    },
    {
      "table": "documents",
      "column": "uploaded_by_user",
      "reason": "Foreign key to user_profiles.id"
    },
    {
      "table": "email_queue",
      "column": "template_id",
      "reason": "Foreign key to email_templates.id"
    },
    {
      "table": "order_item_materials",
      "column": "carving_option_id",
      "reason": "Foreign key to carving_options.id"
    },
    {
      "table": "order_item_materials",
      "column": "metal_option_id",
      "reason": "Foreign key to metal_options.id"
    },
    {
      "table": "order_item_materials",
      "column": "order_item_id",
      "reason": "Foreign key to order_items.id"
    },
    {
      "table": "order_item_materials",
      "column": "stone_option_id",
      "reason": "Foreign key to stone_options.id"
    },
    {
      "table": "order_item_materials",
      "column": "weave_option_id",
      "reason": "Foreign key to weave_options.id"
    },
    {
      "table": "order_item_materials",
      "column": "wood_option_id",
      "reason": "Foreign key to wood_options.id"
    },
    {
      "table": "order_materials",
      "column": "fabric_option_id",
      "reason": "Foreign key to fabric_options.id"
    },
    {
      "table": "order_materials",
      "column": "order_id",
      "reason": "Foreign key to orders.id"
    },
    {
      "table": "order_materials",
      "column": "order_item_id",
      "reason": "Foreign key to order_items.id"
    },
    {
      "table": "orders_old",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "orders",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "orders_old",
      "column": "project_id",
      "reason": "Foreign key to projects.id"
    },
    {
      "table": "packing_boxes",
      "column": "packing_job_id",
      "reason": "Foreign key to packing_jobs.id"
    },
    {
      "table": "packing_jobs",
      "column": "order_item_id",
      "reason": "Foreign key to order_items.id"
    },
    {
      "table": "packing_jobs",
      "column": "qc_inspection_id",
      "reason": "Foreign key to qc_inspections.id"
    },
    {
      "table": "pandadoc_documents",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "pandadoc_documents",
      "column": "order_id",
      "reason": "Foreign key to orders.id"
    },
    {
      "table": "payment_allocations",
      "column": "invoice_id",
      "reason": "Foreign key to invoices.id"
    },
    {
      "table": "payment_allocations",
      "column": "payment_id",
      "reason": "Foreign key to payments.id"
    },
    {
      "table": "portal_access_logs",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "portal_access_logs",
      "column": "portal_user_id",
      "reason": "Foreign key to portal_users.id"
    },
    {
      "table": "portal_activity_log",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "portal_documents",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "portal_sessions",
      "column": "customer_id",
      "reason": "Foreign key to customers.id"
    },
    {
      "table": "portal_sessions",
      "column": "portal_user_id",
      "reason": "Foreign key to portal_users.id"
    },
    {
      "table": "product_materials",
      "column": "carving_option_id",
      "reason": "Foreign key to carving_options.id"
    },
    {
      "table": "product_materials",
      "column": "metal_option_id",
      "reason": "Foreign key to metal_options.id"
    },
    {
      "table": "product_materials",
      "column": "product_id",
      "reason": "Foreign key to items.id"
    },
    {
      "table": "product_materials",
      "column": "stone_option_id",
      "reason": "Foreign key to stone_options.id"
    },
    {
      "table": "product_materials",
      "column": "weave_option_id",
      "reason": "Foreign key to weave_options.id"
    },
    {
      "table": "product_materials",
      "column": "wood_option_id",
      "reason": "Foreign key to wood_options.id"
    },
    {
      "table": "production_items",
      "column": "order_id",
      "reason": "Foreign key to orders.id"
    },
    {
      "table": "production_items",
      "column": "order_item_id",
      "reason": "Foreign key to order_items.id"
    },
    {
      "table": "production_milestones",
      "column": "manufacturer_project_id",
      "reason": "Foreign key to manufacturer_projects.id"
    },
    {
      "table": "production_orders",
      "column": "prototype_id",
      "reason": "Foreign key to items.id"
    },
    {
      "table": "production_orders",
      "column": "concept_id",
      "reason": "Foreign key to items.id"
    },
    {
      "table": "qc_inspections",
      "column": "prototype_production_id",
      "reason": "Foreign key to prototype_production.id"
    },
    {
      "table": "shop_drawings",
      "column": "prototype_production_id",
      "reason": "Foreign key to prototype_production.id"
    }
  ],
  "orphanedData": [],
  "schemaInconsistencies": []
}